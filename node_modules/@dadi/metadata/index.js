module.exports = function (options, count) {
  count = parseInt(count || 0)

  let metadata = {}
  let skip = options.skip

  Object.keys(options).forEach(key => {
    if (key === 'skip') return

    if (options[key] !== undefined) {
      metadata[key] = options[key]
    }
  })

  metadata.page = parseInt(options.page) || 1
  metadata.offset = parseInt(skip) || 0
  metadata.totalCount = count
  metadata.totalPages = Math.ceil(count / (parseInt(options.limit) || 1))

  if (metadata.page < metadata.totalPages) {
    metadata.nextPage = (metadata.page + 1)
  }

  if (metadata.page > 1 && metadata.page <= metadata.totalPages) {
    metadata.prevPage = metadata.page - 1
  }

  return metadata
}
