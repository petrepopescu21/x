module.exports = function (options, count) {
  count = parseInt(count || 0)

  var metadata = Object.assign({}, options)

  metadata.page = parseInt(options.page) || 1
  metadata.offset = parseInt(options.skip) || 0
  metadata.totalCount = count
  metadata.totalPages = Math.ceil(count / (parseInt(options.limit) || 1))

  if (metadata.page < metadata.totalPages) {
    metadata.nextPage = (metadata.page + 1)
  }

  if (metadata.page > 1 && metadata.page <= metadata.totalPages) {
    metadata.prevPage = metadata.page - 1
  }

  delete metadata.skip

  return metadata
}
